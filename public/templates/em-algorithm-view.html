<div class="col-md-12 hidden" id="em-start-view">
 <div class="row">
    <div class="col-md-8">


      <table class="table table-bordered table-condensed table-striped">
        <tbody class="">
          <tr>
            <td class="cwm-green-glass">
              <h3>Run Expectation-Maximization Algorithm</h3>
              <p>
                Given a structure of the Hidden Markov Model (figure on the right), and a sequence of observations, consisting of Heads and Tails which are generated by two coins, one is balanced and the other is loaded, our task is to learn the transition and sensory probabilities using the EM for HMM algorithm.
              </p>

              <h3>Instructions</h3>
              <p>
                This application will take initial parameters, in the form of two input files and a single value for N in the form below. It will then serve those initial parameters as input to the EM algorithm. Your initial parameters, along with the output of the EM algorithm, in the form of learned transition and sensory probabilities, will then be rendered on the screen for your inspection.
              </p>
            </td>
          </tr>
      </tbody>
      </table>






    </div>
    <div class="col-md-4">
        <table class="table table-bordered table-condensed table-striped">
          <tbody class="cwm-off-white-glass">
            <tr>
              <td class="start-screen-banner hmm-text-align-center">
                <img class="hmm-graph" src="img/hmm-graph-3d.png" />
              </td>
            </tr>
          </tbody>
        </table>
      </div>
  </div><!--row-->


<div class="row">
  <div class="col-md-3">
    <table class="table table-bordered table-condensed table-striped">
      <thead class="cwm-black-glass">
        <th>Upload Sensory and Transition Probability File</th>
      </thead>
      <tbody class="cwm-off-white-glass">
        <tr>
          <td class="start-screen-form-box">
            <output id="probability-file-list"></output>
          </td>
        </tr>
        <tr class="cwm-white-glass">
          <td>
            <div class="cwm-black-upload-btn pull-right hmm-upload-submit-btn" id="cwm-black-upload-btn1">
              <input type="file" id="probability-file"  name="files[]"/>
              <output id="probability-file-list"></output>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-md-3">
    <table class="table table-bordered table-condensed table-striped">
      <thead class="cwm-black-glass">
        <th>Upload Heads / Tails Observation Sequence File</th>
      </thead>
      <tbody class="cwm-off-white-glass">
        <tr>
          <td class="start-screen-form-box">
            <output id="observation-file-list"></output>
          </td>
        </tr>
        <tr class="cwm-white-glass">
          <td>
            <div class="cwm-black-upload-btn pull-right hmm-upload-submit-btn" id="cwm-black-upload-btn2">
              <input type="file" id="observation-file"  name="files[]"/>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-md-3">
    <table class="table table-bordered table-condensed table-striped">
      <thead class="cwm-black-glass">
        <th>Upload Sequence of States File</th>
      </thead>
      <tbody class="cwm-off-white-glass">
        <tr>
          <td class="start-screen-form-box">
            <output id="state-sequence-file-list"></output>
          </td>
        </tr>
        <tr class="cwm-white-glass">
          <td>
            <div class="cwm-black-upload-btn pull-right hmm-upload-submit-btn" id="cwm-black-upload-btn3">
              <input type="file" id="state-sequence-file"  name="files[]"/>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-md-3">
    <table class="table table-bordered table-condensed table-striped">
      <thead class="cwm-black-glass">
        <th>Specify the Value of N (Number of Iterations)</th>
      </thead>
      <tbody class="cwm-off-white-glass">
        <tr>
          <td class="start-screen-form-box">
            <div class="form-group">
              <label class="radio"><span id="hmm-number-label">N =</span>    
                <input id="hmm-number-input" type="number" min="0" placeholder="Example: 100">
                <p  id="hmm-number-input-error" class="hmm-file-error-text text-danger hidden">You must enter a positive integer value in this field.</p>
              </label>
            </div>
          </td>
        </tr>
        <tr class="cwm-white-glass">
          <td><div class="cwm-submit-button pull-right" id="cwm-submit-button-start"></div></td>
        </tr>
      </tbody>
    </table>
  </div>
</div><!--row-->

<div class="row cwm-white-glass">
  <h4 id="hmm-file-submit-error-msg" class="hidden text-danger pull-right">One or more input files are missing or contain errors</h4>
</div>
</div><!--col-md-12--> 


<div class="col-md-12  preview-screen-stats" id="em-results-view">
 <div class="row">
    <div class="col-md-8">
      <table class="table table-bordered table-condensed table-striped">
        <tbody class="">
          <tr>
            <td class="cwm-green-glass">
              <h3>Expectation-Maximization Algorithm Results</h3>
            </td>
          </tr>
      </tbody>
      </table>

      <table class="table table-condensed table-bordered cwm-black-glass" style="table-layout: fixed; word-wrap: break-word;">
			<caption>Initial Input Sensory and Transition Probabilities</caption>
		  <tbody>
		    <tr>
		      <td>P(B|B):</td>
		      <td><%= em_virtibi.get("generated_B_B") %></td>
		    </tr>
		    <tr>
		      <td>P(B|L):</td>
		      <td><%= em_virtibi.get("generated_B_L") %></td>
		    </tr>
		    <tr>
		      <td>P(L|L):</td>
		      <td><%= em_virtibi.get("generated_L_L") %></td>
		    </tr>
		    <tr>
		      <td>P(L|B):</td>
		      <td><%= em_virtibi.get("generated_L_B") %></td>
		    </tr>
		    <tr>
		    <tr>
		      <td>P(H|B):</td>
		      <td><%= em_virtibi.get("generated_H_B") %></td>
		    </tr>
		    <tr>
		      <td>P(T|B):</td>
		      <td><%= em_virtibi.get("generated_T_B") %></td>
		    </tr>
		    <tr>
		      <td>P(H|L):</td>
		      <td><%= em_virtibi.get("generated_H_L") %></td>
		    </tr>
		    <tr>
		      <td>P(T|L):</td>
		      <td><%= em_virtibi.get("generated_T_L") %></td>
		    </tr>
		      <td>
		      	<% if(probabilityFile.get("input").length) { %>
					Source: <span class="text-success"><%= probabilityFile.get("name") %></span>
				<% } else { %>
					Source: <span class="text-success">Initial Default Values</span>
				<% } %>
		      </td>
		      <td></td>
		    </tr>
		  </tbody>
		</table>

		<table class="table table-condensed table-bordered cwm-black-glass" style="table-layout: fixed; word-wrap: break-word;">
			<caption>Input Observation Sequence Source and Number of Iterations</caption>
			<tbody>
				<tr>
					<td>N</td>
					<td><%= em_virtibi.get("n") %></td>
				</tr>
				<% if(em_virtibi.get("observationSequence").length) { %>
				<tr>
					<td>Observation Sequence <span class="text-success">(length: <%= em_virtibi.get("observationSequence").length %>)</span></td>
					<td><%= em_virtibi.get("observationSequence") %></td>
				</tr>
				<tr>
					<td>Source:  <span class="text-success"><%= observationFile.get("name") %></span></td>
					<td></td>
				</tr>			
				<% } else { %>
				<tr>
					<td>Generated Observation Sequence Length</td>
					<td><%= em_virtibi.get("generatedObservationSequence").length %></td>
				</tr>
				<tr>
					<td>Generated Observation Sequence</td>
					<td><%= em_virtibi.get("generatedObservationSequence") %></td>
				</tr>
				<tr>
					<td>Generated State Sequence</td>
					<td><%= em_virtibi.get("generatedStateSequence") %></td>
				</tr>
				<% } %>
			</tbody>
		</table>

    <table class="table table-condensed table-bordered cwm-black-glass" style="table-layout: fixed; word-wrap: break-word;">
      <caption>Learned Sensory and Transition Probabilities After <%= em_virtibi.get("n") %> Iterations</caption>
      <tbody>
        <tr>
          <td>P(B|B):</td>
          <td><%= em_virtibi.get("B_B") %></td>
        </tr>
        <tr>
          <td>P(B|L):</td>
          <td><%= em_virtibi.get("B_L") %></td>
        </tr>
        <tr>
          <td>P(L|L):</td>
          <td><%= em_virtibi.get("L_L") %></td>
        </tr>
        <tr>
          <td>P(L|B):</td>
          <td><%= em_virtibi.get("L_B") %></td>
        </tr>
        <tr>
        <tr>
          <td>P(H|B):</td>
          <td><%= em_virtibi.get("H_B") %></td>
        </tr>
        <tr>
          <td>P(T|B):</td>
          <td><%= em_virtibi.get("T_B") %></td>
        </tr>
        <tr>
          <td>P(H|L):</td>
          <td><%= em_virtibi.get("H_L") %></td>
        </tr>
        <tr>
          <td>P(T|L):</td>
          <td><%= em_virtibi.get("T_L") %></td>
        </tr>
      </tbody>
    </table>

    </div>
    <div class="col-md-4">
        <table class="table">
          <tbody class="cwm-off-white-glass">
            <tr class="preview-screen-stats">
              <td class="start-screen-banner hmm-text-align-center">
                <img class="hmm-graph" src="img/hmm-graph-3d.png" />
              </td>
            </tr>
            <tr>
              <td class="cwm-white-glass">
            	<div class="cwm-reset-button pull-right" id="cwm-reset-button-em-preview"></div>
			  </td>
			 </tr>
          </tbody>
        </table>
      </div>
  </div><!--row-->	

</div>

  